<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>ProRails</title>
	<script src="dist/js/villa.min.js"></script>
	<link rel="stylesheet" href="dist/css/villa.min.css"/>
	<!--[if lt IE 9]>
	<link rel="stylesheet" type="text/css" href="dist/css/material-colors.css"/>
	<link rel="stylesheet" type="text/css" href="dist/css/cross.css"/>
	<script src="dist/js/html5shiv.js"></script>
	<script src="dist/js/html5shiv-printshiv.js"></script>
	<script src="dist/js/classList.min.js"></script>
	<![endif]-->
</head>
<body class="font-grey-900">

<div id="categories"></div>

<script src="dist/js/jquery-2.1.1.min.js"></script>
<script>

/**
 * Category
 */

var destroyCategories;
destroyCategories = function() {
	document.getElementById('categories').innerHTML = '';
};

var buildCategoryInput;
buildCategoryInput = function() {

	var e = document.createElement('div');

	var input = document.createElement('input');
	input.id = 'categoryInput';

	var a = document.createElement('a');
	a.innerHTML = 'Nova categoria';
	a.classList.add('btn');
	a.classList.add('new');

	e.appendChild(input);
	e.appendChild(a);

	return e;

};

var buildCategory;
buildCategory = function(d) {
	var li = document.createElement('li');
	var text = document.createTextNode(d.name);
	li.setAttribute('data-category', d._id);
	li.appendChild(text);

	return li;
};

var buildCategoriesList;
buildCategoriesList = function(d) {

	var e = document.createElement('ul');

	for (var i = d.length; i--; )
		e.appendChild(buildCategory(d[i].category));

	return e;

};

var buildCategories;
buildCategories = function(d) {

	var b = document.getElementById('categories');

	b.insertBefore(buildCategoriesList(d), b.firstChild);
	b.insertBefore(buildCategoryInput(), b.firstChild);

};

var pullCategory;
pullCategory = function(a) {
	$.ajax({
		cache: false,
		url: 'i/category/pull/',
		success: function(data) {
			buildCategories(data)
		}
	});
};

var getCategory;
getCategory = function() {
	pullCategory();
};

getCategory();

/**
* Product
*/

var buildProduct;
buildProduct = function(d) {

	var b = document.body;
	var e = document.createElement('ul');

	for (var i = d.length; i--; ) {
		var a = d[i].product;

		var li = document.createElement('li');
		li.setAttribute('data-category', a.category_id);
		var text = document.createTextNode(a.name);

		li.appendChild(text);
		e.appendChild(li);
	}

	b.insertBefore(e, b.firstChild);
};

var pullProduct;
pullProduct = function(a) {
	$.ajax({
		cache: false,
		url: 'i/product/pull/',
		success: function(data) {
			buildProduct(data)
		}
	});
};

var getProduct;
getProduct = function() {
	pullProduct();
};

</script>

</body>
</html>